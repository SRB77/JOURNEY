import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};


export  const chatSession = model.startChat({
    generationConfig,
    history: [
      {
        role: "user",
        parts: [
          {
            text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget,Give me a Hotels options list with\nHotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit  only in JSON format without any text and all only JSON data .",
          },
        ],
      },
      {
        role: "model",
        parts: [
          {
            text: '```json\n{\n  "location": "Las Vegas",\n  "budget": "Cheap",\n  "duration": "3 Days",\n  "travelers": "Couple",\n  "hotels": [\n    {\n      "HotelName": "Circus Circus Hotel & Casino",\n      "Hotel_address": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "Price": "$40 - $70 per night",\n      "hotel_image_url": "https://www.circuscircus.com/wp-content/uploads/2023/04/Circus-Circus-Las-Vegas-Exterior-1920x1080.jpg",\n      "geo_coordinates": {\n        "latitude": 36.1298,\n        "longitude": -115.1659\n      },\n      "rating": 3.5,\n      "descriptions": "Affordable option with a circus theme, amusement park, and casino. Great for budget travelers who want a fun atmosphere."\n    },\n    {\n      "HotelName": "Excalibur Hotel & Casino",\n      "Hotel_address": "3850 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "Price": "$50 - $80 per night",\n      "hotel_image_url": "https://www.excalibur.com/content/dam/Excalibur/Homepage/excalibur-homepage-hero-min.jpg",\n      "geo_coordinates": {\n        "latitude": 36.0987,\n        "longitude": -115.1742\n      },\n      "rating": 4.0,\n      "descriptions": "Medieval-themed hotel with affordable rates, multiple pools, and a variety of dining options. Conveniently located on the Strip."\n    },\n    {\n      "HotelName": "Luxor Hotel & Casino",\n      "Hotel_address": "3900 S Las Vegas Blvd, Las Vegas, NV 89119",\n      "Price": "$60 - $90 per night",\n      "hotel_image_url": "https://www.casino.org/news/wp-content/uploads/2023/04/luxor-las-vegas-casino.jpg",\n      "geo_coordinates": {\n        "latitude": 36.0956,\n        "longitude": -115.1759\n      },\n      "rating": 4.0,\n      "descriptions": "Iconic pyramid-shaped hotel with relatively affordable rates, several pools, and exhibits. Good for budget travelers seeking a unique experience."\n    }\n  ],\n  "itinerary": {\n    "day1": {\n      "theme": "The Strip Exploration & Free Attractions",\n      "best_time_to_visit": "Morning for walking, Evening for shows and lights",\n      "places": [\n        {\n          "placeName": "Bellagio Conservatory & Botanical Garden",\n          "Place_Details": "Free botanical garden that changes seasonally with elaborate displays.",\n          "Place_Image_Url": "https://www.bellagio.com/content/dam/MGM/bellagio/entertainment/conservatory-botanical-garden/bellagio-conservatory-floral-display-chinese-new-year-2023.tif",\n          "geo_coordinates": {\n            "latitude": 36.1126,\n            "longitude": -115.1742\n          },\n          "ticket_pricing": "Free",\n          "rating": 4.8,\n          "time_travel": "1 hour"\n        },\n        {\n          "placeName": "Fountains of Bellagio",\n          "Place_Details": "Iconic free water show with music and lights.",\n          "Place_Image_Url": "https://media.cntraveler.com/photos/6166a7b2ff74a96f70a275c9/master/w_2000,h_1333,c_limit/Bellagio_Fountains_GettyImages-1280560928.jpg",\n          "geo_coordinates": {\n            "latitude": 36.1128,\n            "longitude": -115.1738\n          },\n          "ticket_pricing": "Free",\n          "rating": 4.7,\n          "time_travel": "30 minutes"\n        },\n        {\n          "placeName": "High Roller Observation Wheel (Optional)",\n          "Place_Details": "Offers stunning views of the city.",\n          "Place_Image_Url": "https://caesars.brightspotcdn.com/dims4/default/548b558/2147483647/strip/true/crop/3000x1688+0+156/resize/1440x810!/quality/90/?url=https%3A%2F%2Fcaesars.brightspotcdn.com%2F1d%2F76%2Fec45b11949398f82fbb035ca9650%2Fthe-linq-high-roller-exterior-2188x1231.jpg",\n          "geo_coordinates": {\n            "latitude": 36.1161,\n            "longitude": -115.1692\n          },\n          "ticket_pricing": "$25 - $37 per person (depending on the time of day)",\n          "rating": 4.5,\n          "time_travel": "30 minutes"\n        },\n        {\n          "placeName": "Explore The LINQ Promenade",\n          "Place_Details": "Walk around this place and see the shops and restaurants.",\n          "Place_Image_Url": "https://vegasexperience.com/wp-content/uploads/2017/10/the-linq-promenade-hero-banner.jpg",\n          "geo_coordinates": {\n            "latitude": 36.1170,\n            "longitude": -115.1692\n          },\n          "ticket_pricing": "Free (unless you eat or shop)",\n          "rating": 4.4,\n          "time_travel": "1 hour"\n        }\n      ]\n    },\n    "day2": {\n      "theme": "Downtown Las Vegas & History",\n      "best_time_to_visit": "Afternoon/Evening",\n      "places": [\n        {\n          "placeName": "Fremont Street Experience",\n          "Place_Details": "Light and sound show on a pedestrian mall with casinos and entertainment.",\n          "Place_Image_Url": "https://vegasexperience.com/wp-content/uploads/2023/07/Fremont-Street-Experience-Night-3.jpg",\n          "geo_coordinates": {\n            "latitude": 36.1701,\n            "longitude": -115.1420\n          },\n          "ticket_pricing": "Free",\n          "rating": 4.6,\n          "time_travel": "1 hour"\n        },\n        {\n          "placeName": "The Neon Museum",\n          "Place_Details": "Vintage Las Vegas signs",\n          "Place_Image_Url": "https://www.neonmuseum.org/wp-content/uploads/2023/09/Neon-Museum-Night-Main-Boneyard.jpg",\n          "geo_coordinates": {\n            "latitude": 36.1550,\n            "longitude": -115.1410\n          },\n          "ticket_pricing": "$28-$36 per person",\n          "rating": 4.7,\n          "time_travel": "1 hour 30 minutes"\n        },\n        {\n          "placeName": "Downtown Container Park",\n          "Place_Details": "Outdoor shopping and entertainment center made from shipping containers.",\n          "Place_Image_Url": "https://downtowncontainerpark.com/wp-content/uploads/2022/08/DCP-Homepage-Header-1.jpg",\n          "geo_coordinates": {\n            "latitude": 36.1697,\n            "longitude": -115.1390\n          },\n          "ticket_pricing": "Free (unless you eat or shop)",\n          "rating": 4.3,\n          "time_travel": "1 hour"\n        },\n         {\n          "placeName": "Gold & Silver Pawn Shop (Pawn Stars)",\n          "Place_Details": "As seen on TV. Be aware of possible long lines due to popularity",\n          "Place_Image_Url": "https://vegasexperience.com/wp-content/uploads/2017/10/the-linq-promenade-hero-banner.jpg",\n          "geo_coordinates": {\n            "latitude": 36.1629,\n            "longitude": -115.1547\n          },\n          "ticket_pricing": "Free, potentially costs if buying merchandise",\n          "rating": 4.4,\n          "time_travel": "30 minutes"\n        }\n      ]\n    },\n    "day3": {\n      "theme": "Hoover Dam & Nature Escape",\n      "best_time_to_visit": "Morning (before the crowds and heat)",\n      "places": [\n        {\n          "placeName": "Hoover Dam",\n          "Place_Details": "A monumental dam on the Colorado River.",\n          "Place_Image_Url": "https://www.usbr.gov/lc/hooverdam/images/ImageGallery/overview.jpg",\n          "geo_coordinates": {\n            "latitude": 36.0157,\n            "longitude": -114.7372\n          },\n          "ticket_pricing": "$15 for the power plant tour, free to walk across the dam.",\n          "rating": 4.7,\n          "time_travel": "2-3 hours (including travel time to/from Las Vegas)"\n        },\n        {\n          "placeName": "Lake Mead National Recreation Area",\n          "Place_Details": "Enjoy boating, hiking, or simply take in the scenery.",\n          "Place_Image_Url": "https://www.nps.gov/lake/planyourvisit/images/20211013_105500.jpg?maxwidth=1300&maxheight=1300&autorotate=false",\n          "geo_coordinates": {\n            "latitude": 36.2558,\n            "longitude": -114.4908\n          },\n          "ticket_pricing": "$25 per vehicle for entrance fee (good for 7 days).",\n          "rating": 4.5,\n          "time_travel": "2 hours"\n        },\n        {\n          "placeName": "Ethel M Chocolate Factory and Cactus Garden",\n          "Place_Details": "A free botanical cactus garden and chocolate tour.",\n          "Place_Image_Url": "https://www.ethelm.com/cdn/shop/files/EH_Garden_LandingPage_Hero_1600x.jpg?v=1685474747",\n          "geo_coordinates": {\n            "latitude": 36.0486,\n            "longitude": -115.0627\n          },\n          "ticket_pricing": "Free",\n          "rating": 4.3,\n          "time_travel": "1 hours"\n        }\n      ]\n    }\n  }\n}\n```',
          },
        ],
      },
    ],
  });